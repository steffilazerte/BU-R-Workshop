<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Visualizing Data in R</title>
    <meta charset="utf-8" />
    <script src="2 Visualizing Data_files/header-attrs-2.11/header-attrs.js"></script>
    <link rel="stylesheet" href="pres_styles.css" type="text/css" />
    <link rel="stylesheet" href="global_styles.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">

class: title-slide, nobar







![:img right: 25px, bottom: 50px, 65%, , ](figures/viz_fig.png)

## Workshop: Dealing with Data in R
# Visualizing Data in R
## A primer on `ggplot2`


.footnote[Steffi LaZerte &lt;https://steffilazerte.ca&gt; | *Compiled: 2022-01-26*]

---
class: section

# First things first

Save previous script (consider names like `intro.R` or `1_getting_started.R`)

Open New File &lt;br&gt;.medium[(make sure you're in the RStudio Project)]

![:spacer 10px]()

Add `library(tidyverse)` to the top

Save this new script

.medium[consider names like `figs.R` or `2_figures.R`]

---
# Outline

## 1. Figures with `ggplot2` .small[(A `tidyverse` package)]
- Basic plot
- Common plot types
- Plotting by categories
- Adding statistics
- Customizing plots
- Annotating plots

## 2. Combining figures with `patchwork`

## 3. Saving figures

---
class: nobar
# `ggplot2`

![:img center, bottom: 0, 78%, ,](https://github.com/allisonhorst/stats-illustrations/raw/master/rstats-artwork/ggplot2_masterpiece.png)

.footnote[Artwork by [@allison_horst](https://github.com/allisonhorst/stats-illustrations)]



---

# Our data set: Palmer Penguins!


![:img center, bottom: 0, 78%, ,](https://raw.githubusercontent.com/allisonhorst/palmerpenguins/master/man/figures/lter_penguins.png)

.footnote[Artwork by [@allison_horst](https://github.com/allisonhorst/stats-illustrations)]

![:img right: 1%, top: 1%, 10%, ,](https://raw.githubusercontent.com/allisonhorst/palmerpenguins/master/man/figures/logo.png)

---
# Our data set: Palmer Penguins!

.small[

```r
library(palmerpenguins)
penguins
```

```
## # A tibble: 344 × 8
##   species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g sex     year
##   &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt; &lt;fct&gt;  &lt;int&gt;
## 1 Adelie  Torgersen           39.1          18.7               181        3750 male    2007
## 2 Adelie  Torgersen           39.5          17.4               186        3800 female  2007
## 3 Adelie  Torgersen           40.3          18                 195        3250 female  2007
## 4 Adelie  Torgersen           NA            NA                  NA          NA &lt;NA&gt;    2007
## 5 Adelie  Torgersen           36.7          19.3               193        3450 female  2007
## 6 Adelie  Torgersen           39.3          20.6               190        3650 male    2007
## 7 Adelie  Torgersen           38.9          17.8               181        3625 female  2007
## 8 Adelie  Torgersen           39.2          19.6               195        4675 male    2007
## # … with 336 more rows
```
]

![:img right: 10%, bottom: 0, 25%, ,](https://raw.githubusercontent.com/allisonhorst/palmerpenguins/master/man/figures/lter_penguins.png)

.footnote[Artwork by [@allison_horst](https://github.com/allisonhorst/stats-illustrations)]


![:img right: 1%, top: 1%, 10%, ,](https://raw.githubusercontent.com/allisonhorst/palmerpenguins/master/man/figures/logo.png)


--
.medium[
&gt; **Your turn!**  
&gt; 1. Run this code and look at the output in the console
&gt; 2. Run `view(penguins)` to see the output in the built-in spreadsheet viewer
]

---
# Side Note

### Where did the `penguins` data set come from?

- Sometimes R packages contain data
- If you load a package (i.e. `library(palmerpenguins)`) you can use the data
- **Note** that here the data object is called `penguins` (not `palmerpenguins`)
- **Note** this is NOT how you'll load your own data 

---
# A basic plot




&lt;code class ='r hljs remark-code'&gt;library(palmerpenguins)&lt;br&gt;library(tidyverse)&lt;br&gt;&lt;br&gt;ggplot(data = penguins, aes(x = body_mass_g, y = bill_length_mm)) +&lt;br&gt;&amp;nbsp;&amp;nbsp;geom_point()&lt;/code&gt;


&lt;img src="2 Visualizing Data_files/figure-html/basic_plot-flaired-1.png" width="70%" style="display: block; margin: auto;" /&gt;

---
# Break it down

&lt;code class ='r hljs remark-code'&gt;&lt;span style="background-color:#ffff7f"&gt;library(palmerpenguins)&lt;/span&gt;&lt;br&gt;library(tidyverse)&lt;br&gt;&lt;br&gt;ggplot(data = penguins, aes(x = body_mass_g, y = bill_length_mm)) +&lt;br&gt;&amp;nbsp;&amp;nbsp;geom_point()&lt;/code&gt;

![:spacer 10px]()

### `library(palmerpenguins)`
- Load the `palmerguins` package so we have access to `penguins` data


---
# Break it down

&lt;code class ='r hljs remark-code'&gt;library(palmerpenguins)&lt;br&gt;&lt;span style="background-color:#ffff7f"&gt;library(tidyverse)&lt;/span&gt;&lt;br&gt;&lt;br&gt;ggplot(data = penguins, aes(x = body_mass_g, y = bill_length_mm)) +&lt;br&gt;&amp;nbsp;&amp;nbsp;geom_point()&lt;/code&gt;

![:spacer 10px]()


### `library(tidyverse)`
- Load the `tidyverse` package (which loads the `ggplot2` package and gives us access to the `ggplot()` function among others)

---
# Break it down

&lt;code class ='r hljs remark-code'&gt;library(palmerpenguins)&lt;br&gt;library(tidyverse)&lt;br&gt;&lt;br&gt;&lt;span style="background-color:#ffff7f"&gt;ggplot(data = penguins, aes(x = body_mass_g, y = bill_length_mm))&lt;/span&gt; +&lt;br&gt;&amp;nbsp;&amp;nbsp;geom_point()&lt;/code&gt;

![:spacer 10px]()

### `ggplot()`
- Set the attributes of your plot
- **`data`** = Dataset
- **`aes`** = Aesthetics (how the data are used)
- Think of this as your plot defaults

---

# Break it down

&lt;code class ='r hljs remark-code'&gt;library(palmerpenguins)&lt;br&gt;library(tidyverse)&lt;br&gt;&lt;br&gt;ggplot(data = penguins, aes(x = body_mass_g, y = bill_length_mm)) +&lt;br&gt;&amp;nbsp;&amp;nbsp;&lt;span style="background-color:#ffff7f"&gt;geom_point()&lt;/span&gt;&lt;/code&gt;

![:spacer 10px]()

### `geom_point()`

- Choose a `geom` function to display the data
- Always *added* to a `ggplot()` call with `+`

&gt; ggplots are essentially layered objects, starting with a call to `ggplot()`


---
class: split-50
# Plots are layered

.columnl[
.small[

```r
ggplot(data = penguins, aes(x = sex, y = body_mass_g))
```

&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-8-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]]

.columnr[
.small[

```r
ggplot(data = penguins, aes(x = sex, y = body_mass_g)) +
* geom_boxplot()
```

&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-9-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]]

---
class: split-50
# Plots are layered

.columnl[
.small[

```r
ggplot(data = penguins, aes(x = sex, y = body_mass_g))
```

&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-10-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]]

.columnr[
.small[

```r
ggplot(data = penguins, aes(x = sex, y = body_mass_g)) +
* geom_point()
```

&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-11-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]]

---
class:split-50
# Plots are layered

.columnl[
.small[

```r
ggplot(data = penguins, aes(x = sex, y = body_mass_g))
```

&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-12-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]]

.columnr[
.small[

```r
ggplot(data = penguins, aes(x = sex, y = body_mass_g)) +
* geom_violin()
```

&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-13-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]]

---
class: split-50
# Plots are layered

.columnl[
### You can add multiple layers

.small[

```r
ggplot(data = penguins, aes(x = sex, y = body_mass_g)) +
  geom_boxplot()
```

&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-14-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]]

---
class: split-50
# Plots are layered

.columnl[
### You can add multiple layers

.small[

```r
ggplot(data = penguins, aes(x = sex, y = body_mass_g)) +
  geom_boxplot() + 
* geom_point(size = 2, colour = "red")
```

&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-15-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]]

--

.columnr[


### Order matters

.small[

```r
ggplot(data = penguins, aes(x = sex, y = body_mass_g)) +
* geom_point(size = 2, colour = "red") +
  geom_boxplot()
```

&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-16-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]]

---
class: split-50
# Plots are objects


### Any ggplot can be saved as an object


```r
g &lt;- ggplot(data = penguins, aes(x = sex, y = body_mass_g))
```

--

.columnl[

```r
g
```

&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-18-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]

--

.columnr[

```r
g + geom_boxplot()
```

&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-19-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]



---
class: section

# More Geoms

### (Plot types)

---
# Geoms: Lines


```r
ggplot(data = penguins, aes(x = body_mass_g, y = bill_length_mm)) +
* geom_line()
```

&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-20-1.png" width="60%" style="display: block; margin: auto;" /&gt;

---
# Geoms: Boxplots


```r
ggplot(data = penguins, aes(x = species, y = flipper_length_mm)) +
* geom_boxplot()
```

&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-21-1.png" width="60%" style="display: block; margin: auto;" /&gt;

---
# Geoms: Histogram


```r
ggplot(data = penguins, aes(x = body_mass_g)) +
* geom_histogram(binwidth = 100)
```

&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-22-1.png" width="60%" style="display: block; margin: auto;" /&gt;

--

![:label 50%, 18%, 25%](&lt;strong&gt;Note:&lt;/strong&gt; We only need 1 aesthetic here (x&amp;rpar;)

---
# Geoms: Barplots

### Let `ggplot` count your data


```r
ggplot(data = penguins, aes(x = sex)) +
* geom_bar()
```

&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-23-1.png" width="60%" style="display: block; margin: auto;" /&gt;

---
# Geoms: Barplots

### You can also provide the counts




&lt;code class ='r hljs remark-code'&gt;# Create our own data frame of counts&lt;br&gt;species &lt;- count(penguins, species)&lt;br&gt;&lt;br&gt;ggplot(data = species, aes(x = species, &lt;span style="background-color:#ffff7f"&gt;y = n&lt;/span&gt;)) +&lt;br&gt;&amp;nbsp;&amp;nbsp;geom_bar(&lt;span style="background-color:#ffff7f"&gt;stat = "identity"&lt;/span&gt;)&lt;/code&gt;


&lt;img src="2 Visualizing Data_files/figure-html/bar-flaired-1.png" width="60%" style="display: block; margin: auto;" /&gt;


---
# Your Turn: Create this plot




&lt;code class ='r hljs remark-code'&gt;library(tidyverse)&lt;br&gt;&lt;br&gt;ggplot(data = &lt;span style="background-color:#ffff7f"&gt; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;, aes(x = &lt;span style="background-color:#ffff7f"&gt; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;, y = &lt;span style="background-color:#ffff7f"&gt; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;)) +&lt;br&gt;&amp;nbsp;&amp;nbsp;geom_&lt;span style="background-color:#ffff7f"&gt; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;(&lt;span style="background-color:#ffff7f"&gt; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;)&lt;/code&gt;


&lt;img src="2 Visualizing Data_files/figure-html/yt_boxplot-flaired-1.png" width="60%" style="display: block; margin: auto;" /&gt;

![:box 25%, 15%, 25%](&lt;strong&gt;Extra Challenge&lt;/strong&gt;&lt;br&gt;Plot points on top)


---
exclude: TRUE
# Your Turn: Create this plot


&lt;code class ='r hljs remark-code'&gt;library(tidyverse)&lt;br&gt;&lt;br&gt;ggplot(data = penguins, aes(x = island, y = bill_depth_mm)) +&lt;br&gt;&amp;nbsp;&amp;nbsp;geom_boxplot(colour = "blue")&lt;/code&gt;


&lt;img src="2 Visualizing Data_files/figure-html/yt_boxplot-flaired-sm1dah8-1.png" width="60%" style="display: block; margin: auto;" /&gt;

![:box 25%, 15%, 25%](&lt;strong&gt;Extra Challenge&lt;/strong&gt;&lt;br&gt;Plot points on top)

---
exclude: TRUE
# Your Turn: Create this plot (Extra Challenge)




&lt;code class ='r hljs remark-code'&gt;library(tidyverse)&lt;br&gt;&lt;br&gt;ggplot(data = penguins, aes(x = island, y = bill_depth_mm)) +&lt;br&gt;&amp;nbsp;&amp;nbsp;geom_boxplot(colour = "blue") +&lt;br&gt;&amp;nbsp;&amp;nbsp;&lt;span style="background-color:#ffff7f"&gt;geom_point()&lt;/span&gt;&lt;/code&gt;


&lt;img src="2 Visualizing Data_files/figure-html/yt_boxplot_extra-flaired-1.png" width="60%" style="display: block; margin: auto;" /&gt;


![:box 25%, 15%, 25%](&lt;strong&gt;Extra Challenge&lt;/strong&gt;&lt;br&gt;Plot points on top)


---
exclude: TRUE
# Your Turn: Create this plot (Extra Challenge)




&lt;code class ='r hljs remark-code'&gt;library(tidyverse)&lt;br&gt;&lt;br&gt;ggplot(data = penguins, aes(x = island, y = bill_depth_mm)) +&lt;br&gt;&amp;nbsp;&amp;nbsp;geom_boxplot(colour = "blue") +&lt;br&gt;&amp;nbsp;&amp;nbsp;&lt;span style="background-color:#ffff7f"&gt;geom_count()&lt;/span&gt;&lt;/code&gt;


&lt;img src="2 Visualizing Data_files/figure-html/yt_boxplot_extra2-flaired-1.png" width="60%" style="display: block; margin: auto;" /&gt;


![:box 25%, 15%, 25%](&lt;strong&gt;Extra Challenge&lt;/strong&gt;&lt;br&gt;Plot points on top)




---
class: section
# Showing data by group


---
# Mapping aesthetics


```r
ggplot(data = penguins, aes(x = body_mass_g, y = bill_length_mm)) +
  geom_point()
```

&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-29-1.png" width="60%" style="display: block; margin: auto;" /&gt;

---
# Mapping aesthetics




&lt;code class ='r hljs remark-code'&gt;ggplot(data = penguins, aes(x = body_mass_g, y = bill_length_mm, &lt;span style="background-color:#ffff7f"&gt;colour = sex&lt;/span&gt;)) +&lt;br&gt;&amp;nbsp;&amp;nbsp;geom_point()&lt;/code&gt;


&lt;img src="2 Visualizing Data_files/figure-html/aes1-flaired-1.png" width="60%" style="display: block; margin: auto;" /&gt;

![:box 15%, 35%, 25%](&lt;code&gt;ggplot(&amp;rpar;&lt;/code&gt; automatically creates legends)

---
# Mapping aesthetics




&lt;code class ='r hljs remark-code'&gt;ggplot(data = penguins, aes(x = body_mass_g, y = bill_length_mm, &lt;span style="background-color:#ffff7f"&gt;size = flipper_length_mm&lt;/span&gt;)) +&lt;br&gt;&amp;nbsp;&amp;nbsp;geom_point()&lt;/code&gt;


&lt;img src="2 Visualizing Data_files/figure-html/aes2-flaired-1.png" width="60%" style="display: block; margin: auto;" /&gt;


---
# Mapping aesthetics




&lt;code class ='r hljs remark-code'&gt;ggplot(data = penguins, aes(x = body_mass_g, y = bill_length_mm, &lt;span style="background-color:#ffff7f"&gt;alpha = sex&lt;/span&gt;)) +&lt;br&gt;&amp;nbsp;&amp;nbsp;geom_point()&lt;/code&gt;


&lt;img src="2 Visualizing Data_files/figure-html/aes3-flaired-1.png" width="60%" style="display: block; margin: auto;" /&gt;

---
# Mapping aesthetics




&lt;code class ='r hljs remark-code'&gt;ggplot(data = penguins, aes(x = body_mass_g, y = bill_length_mm, &lt;span style="background-color:#ffff7f"&gt;shape = species&lt;/span&gt;)) +&lt;br&gt;&amp;nbsp;&amp;nbsp;geom_point()&lt;/code&gt;


&lt;img src="2 Visualizing Data_files/figure-html/aes4-flaired-1.png" width="60%" style="display: block; margin: auto;" /&gt;


---
# Mapping aesthetics




&lt;code class ='r hljs remark-code'&gt;ggplot(data = penguins, aes(x = body_mass_g, y = bill_length_mm, &lt;span style="background-color:#ffff7f"&gt;colour = sex, shape = sex&lt;/span&gt;)) +&lt;br&gt;&amp;nbsp;&amp;nbsp;geom_point()&lt;/code&gt;


&lt;img src="2 Visualizing Data_files/figure-html/aes5-flaired-1.png" width="60%" style="display: block; margin: auto;" /&gt;

![:box 15%, 35%, 25%](&lt;code&gt;ggplot(&amp;rpar;&lt;/code&gt; combines legends where it can)

---
# Faceting: `facet_wrap()`


```r
ggplot(data = penguins, aes(x = body_mass_g, y = bill_length_mm, colour = sex)) +
  geom_point() +
* facet_wrap(~ species)
```

&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-35-1.png" width="70%" style="display: block; margin: auto;" /&gt;


![:box 15%, 25%, 20%](Split plots by wrapping&lt;br&gt;&lt;small&gt;Generally for one grouping variable&lt;/small&gt;)

---
# Faceting: `facet_grid()`


```r
ggplot(data = penguins, aes(x = body_mass_g, y = bill_length_mm, colour = sex)) +
  geom_point() +
* facet_grid(sex ~ species)
```

&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-36-1.png" width="70%" style="display: block; margin: auto;" /&gt;


![:box 15%, 25%, 20%](Split plots by &lt;strong&gt;two&lt;/strong&gt; grouping variables on a grid)


---
# Your Turn: Create this plot




&lt;code class ='r hljs remark-code'&gt;ggplot(data = &lt;span style="background-color:#ffff7f"&gt; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;, aes(&lt;span style="background-color:#ffff7f"&gt; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;)) + &lt;br&gt;&amp;nbsp;&amp;nbsp;&lt;span style="background-color:#ffff7f"&gt; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt; + &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;&lt;span style="background-color:#ffff7f"&gt; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/code&gt;


&lt;img src="2 Visualizing Data_files/figure-html/yt_facet-flaired-1.png" width="80%" style="display: block; margin: auto;" /&gt;

![:spacer 5px]()

.medium[
&gt; **Hint:** `colour` is for outlining with a colour, `fill` is for 'filling' with a colour  
&gt; **Extra Challenge:** Split boxplots by sex **and** island
]

---
exclude: TRUE
# Your Turn: Create this plot


&lt;code class ='r hljs remark-code'&gt;ggplot(data = penguins, aes(x = sex, y = flipper_length_mm, fill = sex)) + &lt;br&gt;&amp;nbsp;&amp;nbsp;geom_boxplot() + &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;facet_wrap(~ species)&lt;/code&gt;


&lt;img src="2 Visualizing Data_files/figure-html/yt_facet-flaired-a9z3qju-1.png" width="80%" style="display: block; margin: auto;" /&gt;
![:spacer 5px]()

.medium[
&gt; **Hint:** `colour` is for outlining with a colour, `fill` is for 'filling' with a colour  
&gt; **Extra Challenge:** Split boxplots by sex **and** island
]

---
exclude: TRUE
# Your Turn: Create this plot (Extra Challenge)




&lt;code class ='r hljs remark-code'&gt;ggplot(data = penguins, aes(x = sex, y = flipper_length_mm, &lt;span style="background-color:#ffff7f"&gt;fill = island&lt;/span&gt;)) + &lt;br&gt;&amp;nbsp;&amp;nbsp;geom_boxplot() + &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;facet_wrap(~ species)&lt;/code&gt;


&lt;img src="2 Visualizing Data_files/figure-html/yt_facet_extra-flaired-1.png" width="80%" style="display: block; margin: auto;" /&gt;
![:spacer 5px]()

.medium[
&gt; Small change (`fill = sex` to `fill = island`) results in completely different plot
]

---
exclude: true
class: section

# Adding Statistics to Plots

---
# Summarizing data

### Add data means as points

```r
ggplot(data = penguins, aes(x = sex, y = body_mass_g)) +
* stat_summary(geom = "point", fun = mean)
```

&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-40-1.png" width="60%" style="display: block; margin: auto;" /&gt;


---
# Summarizing data

### Add error bars, calculated from the data

```r
ggplot(data = penguins, aes(x = sex, y = body_mass_g)) +
  stat_summary(geom = "point", fun = mean) +
* stat_summary(geom = "errorbar", width = 0.05, fun.data = mean_se)
```

&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-41-1.png" width="60%" style="display: block; margin: auto;" /&gt;

---
class: section

# Trendlines / Regression Lines

---
# Trendlines / Regression lines

### `geom_line()` is connect-the-dots, not a trend or linear model


```r
ggplot(data = penguins, aes(x = body_mass_g, y = bill_length_mm)) +
  geom_point() +
  geom_line()
```

&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-42-1.png" width="60%" style="display: block; margin: auto;" /&gt;

--

![:box 25%, 25%, 20%](Not what we're looking for)

---
# Trendlines / Regression lines
### Let's add a trend line properly

Start with basic plot:

```r
g &lt;- ggplot(data = penguins, aes(x = body_mass_g, y = bill_length_mm)) +
  geom_point()
g
```

&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-43-1.png" width="60%" style="display: block; margin: auto;" /&gt;


---
class: split-45
# Trendlines / Regression lines

.columnl[
### Add the `stat_smooth()`
- `lm` is for "linear model" (i.e. trendline)
- grey ribbon = standard error
]

.columnr[



&lt;code class ='r hljs remark-code'&gt;g + &lt;span style="background-color:#ffff7f"&gt;stat_smooth(method = "lm")&lt;/span&gt;&lt;/code&gt;
]

![:spacer 55px]()

&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-45-1.png" width="60%" style="display: block; margin: auto;" /&gt;


---
class: split-45
# Trendlines / Regression lines

.columnl[
### Add the `stat_smooth()`
- remove the grey ribbon `se = FALSE`
]

.columnr[



&lt;code class ='r hljs remark-code'&gt;g + stat_smooth(method = "lm", &lt;span style="background-color:#ffff7f"&gt;se = FALSE&lt;/span&gt;)&lt;/code&gt;

]

![:spacer 55px]()

&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-47-1.png" width="60%" style="display: block; margin: auto;" /&gt;



---
# Trendlines / Regression lines

### A line for each group
- Specify group (here we use `colour` to specify `species`)


```r
g &lt;- ggplot(data = penguins, aes(x = body_mass_g, y = bill_length_mm, colour = species)) +
  geom_point()
g
```

&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-48-1.png" width="60%" style="display: block; margin: auto;" /&gt;

---
# Trendlines / Regression lines

### A line for each group
- `stat_smooth()` automatically uses the same grouping


```r
g + stat_smooth(method = "lm", se = FALSE)
```

&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-49-1.png" width="60%" style="display: block; margin: auto;" /&gt;

---
# Trendlines / Regression lines

### A line for each group AND overall

```r
g +  
  stat_smooth(method = "lm", se = FALSE) + 
  stat_smooth(method = "lm", se = FALSE, colour = "black")
```

&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-50-1.png" width="60%" style="display: block; margin: auto;" /&gt;


---
# Your Turn: Create this plot

- A scatter plot: **Flipper Length** by **Body Mass** grouped by **Species**
- With *a single regression line for the overall trend*


&gt; **Extra Challenge:** Create a separate plot for each sex as well

---
exclude: TRUE

# Your Turn: Create this plot

- A scatter plot: **Flipper Length** by **Body Mass** grouped by **Species**
- With *a single regression line for the overall trend*


```r
ggplot(data = penguins, aes(x = body_mass_g, y = flipper_length_mm, colour = species)) + 
  geom_point() +
  stat_smooth(se = FALSE, colour = "black", method = "lm")
```

&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-51-1.png" width="60%" style="display: block; margin: auto;" /&gt;

---
exclude: TRUE

# Your Turn: Create this plot (Extra Challenge)


```r
ggplot(data = penguins, aes(x = body_mass_g, y = flipper_length_mm, colour = species)) + 
  geom_point() +
  stat_smooth(se = FALSE, colour = "black", method = "lm") +
* facet_wrap(~sex)
```

&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-52-1.png" width="80%" style="display: block; margin: auto;" /&gt;


---
class: section

# Customizing plots

---
# Customizing: Starting plot

### Let's work with this plot


```r
g &lt;- ggplot(data = penguins, aes(x = body_mass_g, y = bill_length_mm, colour = species)) +
  geom_point()
```

&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-54-1.png" width="60%" style="display: block; margin: auto;" /&gt;

---
# Customizing: Labels


```r
g + labs(title = "Bill Length vs. Body Mass", 
         x = "Body Mass (g)", 
         y = "Bill Length (mm)",
         colour = "Species", tag = "A")
```

&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-55-1.png" width="60%" style="display: block; margin: auto;" /&gt;


--

![:box 30%, 20%, 40%](&lt;strong&gt;Your Turn:&lt;/strong&gt;&lt;br&gt; Add proper labels to one of your previous plots)

---
class: split-50
# Customizing: Built-in themes

.columnl[
&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-56-1.png" width="95%" style="display: block; margin: auto;" /&gt;&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-56-2.png" width="95%" style="display: block; margin: auto;" /&gt;
]

.columnr[
&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-57-1.png" width="95%" style="display: block; margin: auto;" /&gt;&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-57-2.png" width="95%" style="display: block; margin: auto;" /&gt;
]


---
# Customizing: Axes

`scale_` + (`x` or `y`) + type (`contiuous`, `discrete`, `date`, `datetime`)

- `scale_x_continuous()`
- `scale_y_discrete()`
- etc.

### Common arguments


```r
g + scale_x_continuous(breaks = seq(0, 20, 10)) # Tick breaks
g + scale_x_continuous(limits = c(0, 15))       # xlim() is a shortcut for this
g + scale_x_continuous(expand = c(0, 0))        # Space between axis and data
```

---
# Customizing: Axes

### Breaks


```r
g + scale_x_continuous(breaks = seq(2500, 6500, 500))
```

&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-59-1.png" width="60%" style="display: block; margin: auto;" /&gt;

---
# Customizing: Axes

### Limits

```r
g + scale_x_continuous(limits = c(3000, 4000))
```

&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-60-1.png" width="60%" style="display: block; margin: auto;" /&gt;

---
# Customizing: Axes

### Space between origin and axis start

```r
g + scale_x_continuous(expand = c(0, 0))
```

&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-61-1.png" width="60%" style="display: block; margin: auto;" /&gt;




---
# Customizing: Aesthetics

### Using scales

`scale_` + aesthetic (`colour`, `fill`, `size`, etc.) + type (`manual`, `continuous`, `datetime`, etc.)


```r
g + scale_colour_manual(name = "Type", values = c("green", "purple", "yellow"))
```

&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-62-1.png" width="60%" style="display: block; margin: auto;" /&gt;

---
# Customizing: Aesthetics

### Using scales

Or be very explicit:


```r
g + scale_colour_manual(name = "Type", na.value = "black", values = c("Adelie" = "green", 
                                                                      "Gentoo" = "purple", 
                                                                      "Chinstrap" = "yellow"))
```

&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-63-1.png" width="60%" style="display: block; margin: auto;" /&gt;

---
# Customizing: Aesthetics

### For colours, consider colour-blind-friendly scale

**`viridis_d` for "discrete" data**




&lt;code class ='r hljs remark-code'&gt;ggplot(data = penguins, aes(x = body_mass_g, y = bill_length_mm, colour = species)) +&lt;br&gt;&amp;nbsp;&amp;nbsp;geom_point() + &lt;br&gt;&amp;nbsp;&amp;nbsp;scale_colour&lt;span style="background-color:#ffff7f"&gt;_viridis_d&lt;/span&gt;(name = "Type")&lt;/code&gt;


&lt;img src="2 Visualizing Data_files/figure-html/cb1-flaired-1.png" width="60%" style="display: block; margin: auto;" /&gt;


---
# Customizing: Aesthetics

### For colours, consider colour-blind-friendly scale

**`viridis_c` for "continuous" data**




&lt;code class ='r hljs remark-code'&gt;ggplot(data = penguins, aes(x = body_mass_g, y = bill_length_mm, colour = bill_length_mm)) +&lt;br&gt;&amp;nbsp;&amp;nbsp;geom_point() + &lt;br&gt;&amp;nbsp;&amp;nbsp;scale_colour&lt;span style="background-color:#ffff7f"&gt;_viridis_c&lt;/span&gt;(name = "Bill Length (mm)")&lt;/code&gt;


&lt;img src="2 Visualizing Data_files/figure-html/cb2-flaired-1.png" width="60%" style="display: block; margin: auto;" /&gt;

---
# Customizing: Aesthetics

### Forcing

Remove the association between a variable and an aesthetic




&lt;code class ='r hljs remark-code'&gt;ggplot(data = penguins, aes(x = body_mass_g, y = bill_length_mm, colour = sex)) +&lt;br&gt;&amp;nbsp;&amp;nbsp;geom_point(&lt;span style="background-color:#ffff7f"&gt;colour = "green", size = 5&lt;/span&gt;) +&lt;br&gt;&amp;nbsp;&amp;nbsp;stat_smooth(method = "lm", se = FALSE, &lt;span style="background-color:#ffff7f"&gt;colour = "red"&lt;/span&gt;)&lt;/code&gt;


&lt;img src="2 Visualizing Data_files/figure-html/forcing-flaired-1.png" width="60%" style="display: block; margin: auto;" /&gt;


![:box 15%, 60%, 20%](&lt;strong&gt;Note:&lt;/strong&gt; When forcing, aesthetic is not inside &lt;code&gt;aes(&amp;rpar;&lt;code&gt;)

---
class: split-50
# Customizing: Legends placement

.columnl[
### At the: top, bottom, left, right

```r
g + theme(legend.position = "top")
```

&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-67-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]

.columnr[
### Exactly here

```r
g + theme(legend.position = c(0.15, 0.7))
```

&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-68-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]

---
# Your Turn: Create this plot

![:spacer 20px]()

&lt;img src="2 Visualizing Data_files/figure-html/yt_hard-1.png" width="90%" style="display: block; margin: auto;" /&gt;

![:box 20%, 8%, 25%](&lt;strong&gt;Extra Challenge&lt;/strong&gt;&lt;br&gt;Create a plot of your own data)

---
exclude: TRUE
# Your Turn: Create this plot

.small[

```r
ggplot(penguins, aes(x = body_mass_g, y = flipper_length_mm, colour = species)) +
  theme_bw() + 
  geom_point() +
  stat_smooth(method = "lm", se = FALSE, colour = "black") + 
  scale_colour_viridis_d() +
  facet_wrap(~ sex) +
  labs(x = "Body Mass (g)",
       y = "Flipper Length (mm)",
       colour = "Species")
```

&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-69-1.png" width="60%" style="display: block; margin: auto;" /&gt;
]

---
class: section

# Side note: Order of operations


---
class: split-50
# Order of operations

## Remember...
- `ggplot()` is the default line (all options passed down)
- The other lines are *added* with the `+` (options only apply to this line)

---
class: split-50
# Order of operations

## Where to put the `aes()`?

**Sometimes it doesn't matter...**
.columnl[
.small[

```r
ggplot(penguins, aes(x = body_mass_g, 
                     y = flipper_length_mm, 
*                    colour = species)) +
  geom_point()
```

&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-70-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]]

.columnr[
.small[

```r
ggplot(penguins, aes(x = body_mass_g, 
                     y = flipper_length_mm)) +
* geom_point(aes(colour = species))
```

&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-71-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]]

---
class: split-50
# Order of operations

## Where to put the `aes()`?

**Sometimes it DOES matter...**
.columnl[
.small[

```r
ggplot(penguins, aes(x = body_mass_g, 
                     y = flipper_length_mm, 
*                    colour = species)) +
  geom_point() +
  stat_smooth(method = "lm")
```

&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-72-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]]

.columnr[
.small[

```r
ggplot(penguins, aes(x = body_mass_g, 
                     y = flipper_length_mm)) +
* geom_point(aes(colour = species)) +
  stat_smooth(method = "lm")
```

&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-73-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]]

--

![:box 75%, 25%, 45%](Applies to ALL lines in the ggplot&lt;br&gt;including &lt;code&gt;stat_smooth&lt;/code&gt;)

--

![:box 25%, 25%, 45%](Applies to only the geom_point in the ggplot&lt;br&gt;not &lt;code&gt;stat_smooth&lt;/code&gt;)

---
class: section

# Annotating plots

---
# Annotating

### Plot to be annotated: Let's add sample sizes


```r
ggplot(data = penguins, aes(x = body_mass_g, y = flipper_length_mm, colour = species)) +
  geom_point() +
  facet_grid(~ species)
```

&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-74-1.png" width="100%" style="display: block; margin: auto;" /&gt;

---
# Annotating

### Create data to use in our annotations
(`mutate()` is covered tomorrow!)


```r
library(tidyverse)
n &lt;- count(penguins, species)
n &lt;- mutate(n, text = paste0("n = ", n))
n
```

```
## # A tibble: 3 × 3
##   species       n text   
##   &lt;fct&gt;     &lt;int&gt; &lt;chr&gt;  
## 1 Adelie      152 n = 152
## 2 Chinstrap    68 n = 68 
## 3 Gentoo      124 n = 124
```

---
# Annotating

.small[

```r
ggplot(data = penguins, aes(x = body_mass_g, y = flipper_length_mm, colour = species)) +
  geom_point() +
  facet_grid(~ species) +
* geom_text(data = n,                  # Use 'n' data set
*           x = +Inf, y = -Inf,        # Location relative to plot (right, bottom)
*           aes(label = text),         # Map 'text' to label
*           hjust = 1, vjust = 0,      # Adjust horizontal and vertical placement
*           colour = "black")          # black text
```

&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-76-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]



---
class: section
# Combining plots

---
# Combining plots with `patchwork`

### Setup
- Load `patchwork`
- Create a couple of different plots


```r
library(patchwork)

g1 &lt;- ggplot(data = penguins, aes(x = bill_length_mm, y = bill_depth_mm, colour = species)) + 
  geom_point()

g2 &lt;- ggplot(data = penguins, aes(x = species, y = flipper_length_mm)) + 
  geom_boxplot()

g3 &lt;- ggplot(data = penguins, aes(x = flipper_length_mm, y = body_mass_g, colour = species)) + 
  geom_point()
```

---
# Combining plots with `patchwork`

### Side-by-Side 2 plots

```r
g1 + g2
```

&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-78-1.png" width="80%" style="display: block; margin: auto;" /&gt;

---
# Combining plots with `patchwork`

### Side-by-Side 3 plots

```r
g1 + g2 + g3
```

&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-79-1.png" width="100%" style="display: block; margin: auto;" /&gt;

---
# Combining plots with `patchwork`

### Stacked 2 plots

```r
g1 / g2
```

&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-80-1.png" width="50%" style="display: block; margin: auto;" /&gt;


---
# Combining plots with `patchwork`

### More complex arrangements

```r
g2 + (g1 / g3)
```

&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-81-1.png" width="60%" style="display: block; margin: auto;" /&gt;

---
# Combining plots with `patchwork`

### More complex arrangements

```r
g2 / (g1 + g3)
```

&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-82-1.png" width="50%" style="display: block; margin: auto;" /&gt;


---
# Combining plots with `patchwork`

### "collect" common legends


```r
g2 / (g1 + g3) + plot_layout(guides = "collect")
```

&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-83-1.png" width="50%" style="display: block; margin: auto;" /&gt;


---
# Combining plots with `patchwork`

### "collect" common legends


```r
g2 / (g1 + g3 + plot_layout(guides = "collect"))
```

&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-84-1.png" width="50%" style="display: block; margin: auto;" /&gt;



---
class: split-55
# Combining plots with `patchwork`

.columnl[
### Annotate
.small[

```r
g2 / (g1 + g3) + 
  plot_layout(guides = "collect") +
  plot_annotation(title = "Penguins Data Summary",          
                  caption = "Fig 1. Penguins Data Summary", 
                  tag_levels = "A",                         
                  tag_suffix = ")")                         
```
]]

.columnr[
&lt;img src="2 Visualizing Data_files/figure-html/unnamed-chunk-85-1.png" width="100%" style="display: block; margin: auto;" /&gt;

]

--

.columnl[

&gt;  **Your Turn:** Combine any 3 figures
]


---
class: section
# Saving plots

---
# Saving plots

### RStudio Export
**_Demo_**

--

### `ggsave()`


```r
g &lt;- ggplot(penguins, aes(x = sex, y = bill_length_mm, fill = year)) +
  geom_boxplot()

ggsave(filename = "penguins_mass.png", plot = g)
```

```
## Saving 6 x 3.9 in image
```

---
# Saving plots

### Publication quality plots

- Many publications require 'lossless' (pdf, svg, eps, ps) or high quality formats (tiff, png)
- Specific sizes corresponding to columns widths
- Minimum resolutions



```r
g &lt;- ggplot(penguins, aes(x = sex, y = body_mass_g)) +
  geom_boxplot() +
  labs(x = "Sex", y = "Body Mass (g)") + 
  theme(axis.text.x = element_text(angle = 45, hjust = 1))

ggsave(filename = "penguins_mass.pdf", plot = g, dpi = 300,
       height = 80, width = 129, units = "mm")
```







---
# Wrapping up: Common mistakes

- The **package** is `ggplot`**2**, the function is just **`ggplot()`**
- Did you remember to put the **`+`** at the **end** of the line?
- Order matters! If you're using custom `theme()`'s, make sure you put these lines **after** bundled themes like `theme_bw()`, or they will be overwritten
- Variables like 'year' are treated as continuous, but are really categories
  - Wrap them in `factor()`, i.e. `ggplot(data = penguins, aes(x = factor(year), y = body_mass_g))`

---
# Wrapping up: Common mistakes

### I get an error regarding an object that can't be found or aethetic length?

![:spacer 5px]()

You are probably trying to plot two different datasets, and you make references to variables in the `ggplot()` call that don't exist in one of the datasets:

![:spacer 15px]()




&lt;code class ='r hljs remark-code'&gt;n &lt;- count(penguins, island)&lt;br&gt;&lt;br&gt;ggplot(&lt;span style="background-color:#ffff7f"&gt;data = penguins&lt;/span&gt;, aes(x = flipper_length_mm, y = bill_length_mm, colour = species)) +&lt;br&gt;&amp;nbsp;&amp;nbsp;geom_point() +&lt;br&gt;&amp;nbsp;&amp;nbsp;facet_wrap(~ island) +&lt;br&gt;&amp;nbsp;&amp;nbsp;geom_text(&lt;span style="background-color:#ffff7f"&gt;data = n&lt;/span&gt;, aes(label = n), &lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;x = -Inf, y = +Inf, hjust = 0, vjust = 1)&lt;/code&gt;

```

## Error: Aesthetics must be either length 1 or the same as the data (3): colour

```


&lt;img src="2 Visualizing Data_files/figure-html/wu_aes1-flaired-1.png" width="60%" style="display: block; margin: auto;" /&gt;


---
# Wrapping up: Common mistakes

### I get an error regarding an object that can't be found or aethetic length?

Either move the aesthetic...




&lt;code class ='r hljs remark-code'&gt;ggplot(penguins, aes(x = flipper_length_mm, y = bill_length_mm)) + &amp;nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;geom_point(&lt;span style="background-color:#ffff7f"&gt;aes(colour = species)&lt;/span&gt;) +&lt;br&gt;&amp;nbsp;&amp;nbsp;facet_wrap(~ island) +&lt;br&gt;&amp;nbsp;&amp;nbsp;geom_text(data = n, aes(label = n), &lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;x = -Inf, y = +Inf, hjust = 0, vjust = 1)&lt;/code&gt;

![:spacer 15px]()

Or assign it to NULL where it is missing...




&lt;code class ='r hljs remark-code'&gt;ggplot(penguins, aes(x = flipper_length_mm, y = bill_length_mm, colour = species)) + &amp;nbsp;&lt;br&gt;&amp;nbsp;&amp;nbsp;geom_point() +&lt;br&gt;&amp;nbsp;&amp;nbsp;facet_wrap(~ island) +&lt;br&gt;&amp;nbsp;&amp;nbsp;geom_text(data = n, aes(label = n, &lt;span style="background-color:#ffff7f"&gt;colour = NULL&lt;/span&gt;), &lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;x = -Inf, y = +Inf, hjust = 0, vjust = 1)&lt;/code&gt;

---
class: space-list
# Wrapping up: Further reading (all **Free**!)
- RStudio &gt; Help &gt; Cheatsheets &gt; Data Visualization with ggplot2
- [`ggplot2` book v3](https://ggplot2-book.org) .small[by Hadley Wickham, Danielle Navarro, and Thomas Lin Pedersen]
- [R Graphics Cookbook](https://r-graphics.org/) .small[by Winston Chang]
- [R for Data Science](https://r4ds.had.co.nz) .small[by Hadley Wickham and Garret Grolemund]
  - [Chapter on Data Visualization](http://r4ds.had.co.nz/data-visualisation.html)
- [Data Visualization: A practical introduction](http://socviz.co/) .small[by Kieran Healy]
- [`patchwork` website](https://patchwork.data-imaginist.com/)
- [`gridExtra` Vignette:  Arranging Multiple Grobs](https://cran.r-project.org/web/packages/gridExtra/vignettes/arrangeGrob.html)
  - Alternative to patchwork
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="macros.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "16:9"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
